%%{init: {
  'theme': 'neutral',
  'themeVariables': {
    'primaryColor': '#f0f4f8',
    'primaryTextColor': '#333',
    'primaryBorderColor': '#8fa7b8',
    'lineColor': '#8fa7b8',
    'secondaryColor': '#f8f0f4',
    'tertiaryColor': '#f4f8f0',
    'fontFamily': 'Trebuchet MS, Arial, sans-serif',
    'fontSize': '14px'
  }
}}%%

graph TD
    classDef default fill:#fff,stroke:#8fa7b8,stroke-width:1px;
    classDef agent fill:#d5f5e3,color:#333,stroke:#82e0aa,stroke-width:2px;
    classDef core fill:#d4e6f1,color:#333,stroke:#7fb3d5,stroke-width:2px;
    classDef factory fill:#e8daef,color:#333,stroke:#bb8fce,stroke-width:2px;

    subgraph Agents["Agents"]
        C[TravelPlannerAgent]
        E[FlightAgent]
        F[HotelAgent]
        G[CarRentalAgent]
    end

    subgraph Core["Core"]
        H[TemplateManager]
        I[ResponseGenerator]
    end

    subgraph Factories["Factories"]
        K[Generation Strategy Factory]
        L[Model Factory Provider]
    end

    C -->|manages| E & F & G
    C -.->|uses| H & I
    I ==>|uses| K & L

    class C,E,F,G agent;
    class H,I core;
    class K,L factory;

    linkStyle default stroke:#8fa7b8,stroke-width:2px;
    linkStyle 0,1,2 stroke:#82e0aa,stroke-width:2px;
    linkStyle 3,4 stroke:#7fb3d5,stroke-width:2px,stroke-dasharray: 5 5;
    linkStyle 5,6 stroke:#bb8fce,stroke-width:3px;

    style Agents fill:#f8f0f4,stroke:#8fa7b8,stroke-width:2px,rx:10,ry:10;
    style Core fill:#e6f3ff,stroke:#8fa7b8,stroke-width:2px,rx:10,ry:10;
    style Factories fill:#f0f8f4,stroke:#8fa7b8,stroke-width:2px,rx:10,ry:10;