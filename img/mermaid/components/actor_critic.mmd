%%{init: {
  'theme': 'neutral',
  'themeVariables': {
    'primaryColor': '#f0f4f8',
    'primaryTextColor': '#333',
    'primaryBorderColor': '#8fa7b8',
    'lineColor': '#8fa7b8',
    'secondaryColor': '#f8f0f4',
    'tertiaryColor': '#f4f8f0',
    'fontFamily': 'Trebuchet MS, Arial, sans-serif',
    'fontSize': '13px'
  }
}}%%

graph TD
    classDef default fill:#fff,stroke:#8fa7b8,stroke-width:1px;
    classDef entrypoint fill:#e6f3ff,color:#333,stroke:#3498db,stroke-width:2px;
    classDef config fill:#f9efd4,color:#333,stroke:#d4b26a;
    classDef core fill:#d4e6f1,color:#333,stroke:#7fb3d5;
    classDef agent fill:#d5f5e3,color:#333,stroke:#82e0aa;
    classDef generator fill:#fdebd0,color:#333,stroke:#f5b041;
    classDef factory fill:#e8daef,color:#333,stroke:#bb8fce;
    classDef strategy fill:#d6eaf8,color:#333,stroke:#85c1e9;
    classDef util fill:#f2d7d5,color:#333,stroke:#e6b0aa;

    A[run.py] --> |configures| B[actor_critic.yml]
    A --> |uses| C[State<br>Manager]
    A --> |initializes| D[Actor]
    A --> |initializes| E[Critic]
    
    D --> |inherits<br>from| F[Agent]
    E --> |inherits<br>from| F
    
    F --> |uses| G[TemplateManager]
    F --> |uses| H[ResponseGenerator]
    
    G --> |imports<br>from| I[io.py]
    H --> |uses| J[Generation<br>StrategyFactory]
    H --> |uses| K[ModelFactory<br>Provider]
    
    J --> |creates| L[DefaultGeneration<br>Strategy]
    K --> |creates| M[VertexAIModel<br>Factory]
    
    D --> |contains| N[DraftGenerator]
    D --> |contains| O[RevisionGenerator]
    
    E --> |contains| P[DraftReview<br>Generator]
    E --> |contains| Q[ReviewRevision<br>Generator]
    
    N --> |inherits<br>from| R[ContentGenerator]
    O --> |inherits<br>from| R
    P --> |inherits<br>from| R
    Q --> |inherits<br>from| R

    class A entrypoint;
    class B config;
    class C,F,G,H core;
    class D,E agent;
    class I util;
    class J,K,L,M factory;
    class N,O,P,Q,R generator;

    linkStyle default stroke:#8fa7b8,stroke-width:1px,stroke-dasharray: 5 5;

    subgraph Agents
        D
        E
    end

    subgraph Generators
        N
        O
        P
        Q
        R
    end

    subgraph Factories
        J
        K
        L
        M
    end

    style Agents fill:#f4f8f0,stroke:#8fa7b8,stroke-width:1px,rx:5,ry:5;
    style Generators fill:#f8f0f4,stroke:#8fa7b8,stroke-width:1px,rx:5,ry:5;
    style Factories fill:#f0f8f4,stroke:#8fa7b8,stroke-width:1px,rx:5,ry:5;